---
title: "Pull_ACS"
output: html_document
date: '2022-06-21'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#setwd("/Users/christophervest/Documents/Land_use_project")
library(tidycensus)
```
```{r, include=FALSE}
readRenviron("~/.Renviron")
Sys.getenv("CENSUS_API_KEY")
options(scipen=999)
```

```{r}
Year <-  2020
```


```{r, include=FALSE}
library(tidyverse)
library(tidycensus)
library(scales)
Goochland_VA_population_2020 <- get_acs(geography = "tract",
state = "VA",
county = "Goochland",
variables = c(popululation = "B02001_001"),
survey = "acs5",
geometry=TRUE,
year = Year) 

pop_per <- mutate(Goochland_VA_population_2020, 
              estimate = estimate / sum(estimate) *100)
```
```{r}
library(tidyverse)
library(tidycensus)
Goochland_VA_unemployment_2020 <- get_acs(geography = "tract",
state = "VA",
county = "Goochland",
variables = c(unemployment = "S2301_C04_001"),
survey = "acs5",
geometry=TRUE,
year = Year) # scrap for now


```
```{r}
library(tidyverse)
library(tidycensus)
Goochland_VA_med.income_2020 <- get_acs(geography = "tract",
state = "VA",
county = "Goochland",
variables = c(median.household.income = "B19013_001"),
survey = "acs5",
geometry=TRUE,
year = Year) # like

```


```{r}
library(tidyverse)
library(tidycensus)
edu.vars <- c("Not A Graduate"= "S1501_C01_060",
              "Highschool Graduate" = "S1501_C01_061",
              "Some College" = "S1501_C01_062",
              "Brachelors" = "S1501_C01_063",
              "Professional" = "S1501_C01_064")

edu.vars.fac <- factor(edu.vars, levels = edu.vars, labels = edu.vars)
Goochland_VA_education_attainment_2020 <- get_acs(geography = "county",
state = "VA",
county = "Goochland",
variables = c(education_attainment = edu.vars),
survey = "acs5",
geometry=TRUE,
year = Year) %>% mutate(estimate = estimate / sum(estimate)*100)



some.df <- data.frame(name = names(edu.vars), id = edu.vars)
some.df$name <- factor(some.df$name, levels = some.df$name)
rownames(some.df) <- NULL # assigning levels to the columns

```

```{r}
library(tidyverse)
library(tidycensus)
ocu.vars <- c(total = "B24011_001",
              "Management, business, science, and arts occupations" = "B24011_002",
              "Management, business, and financial occupations" = "B24011_003",
              "Management occupations" = "B24011_004",
              "Business and financial operations occupations" = "B24011_005",
              "Computer, engineering, and science occupations" = "B24011_006",
              "Computer and mathematical occupations" = "B24011_007",
              "Architecture and engineering occupations" = "B24011_008",
              "Life, physical, and social science occupations" = "B24011_009",
              "Education, legal, community service, arts, and media occupations" = "B24011_010",
              "Community and social service occupations" = "B24011_011",
              "Legal occupations" = "B24011_012",
              "Educational instruction, and library occupations" = "B24011_013",
              "Arts, design, entertainment, sports, and media occupations" = "B24011_014",
              "Healthcare practitioners and technical occupations" = "B24011_015",
              "Health diagnosing and treating practitioners and other technical occupations" = "B24011_016",
              "Health technologists and technicians" = "B24011_017",
              "Service occupations" = "B24011_018",
              "Healthcare support occupations" = "B24011_019",
              "Protective service occupations" = "B24011_020",
              "Firefighting and prevention, and other protective service workers including supervisors" = "B24011_021",
              "Law enforcement workers including supervisors" = "B24011_022",
              "Food preparation and serving related occupations" = "B24011_023",
              "Building and grounds cleaning and maintenance occupations" = "B24011_024",
              "Personal care and service occupations" = "B24011_025",
              "Sales and office occupations" = "B24011_026",
              "Sales and related occupations" = "B24011_027",
              "Office and administrative support occupations" = "B24011_028",
              "Natural resources, construction, and maintenance occupations" = "B24011_029",
              "Farming, fishing, and forestry occupations" = "B24011_030",
              "Construction and extraction occupations" = "B24011_031",
              "Installation, maintenance, and repair occupations" = "B24011_032",
              "Production, transportation, and material moving occupations" = "B24011_033",
              "Production occupations" = "B24011_034",
              "Transportation occupations" = "B24011_035",
              "Material moving occupations" = "B24011_036")
Goochland_VA_ocupation_2020 <- get_acs(geography = "county",
state = "VA",
county = "Goochland",
variables = ocu.vars,
survey = "acs5",
geometry=TRUE,
year = Year) # good, need better viz ideas


```